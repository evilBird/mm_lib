#N canvas 220 80 889 698 12;
#N canvas 147 22 795 617 fft-analysis 0;
#X obj 94 511 *~;
#X obj 55 511 *~;
#X obj 413 356 *~;
#X obj 372 356 *~;
#X obj 372 379 +~;
#X obj 54 183 *~;
#X obj 54 158 inlet~;
#X obj 54 206 rfft~;
#X obj 54 560 *~;
#X obj 141 245 *~;
#X obj 372 333 rfft~;
#X obj 54 535 rifft~;
#X obj 54 583 outlet~;
#X obj 107 245 *~;
#X obj 107 268 +~;
#X text 458 408 modulus;
#X obj 107 420 *~;
#X obj 107 398 clip~;
#X obj 87 184 tabreceive~ \$0-hann;
#X obj 599 17 loadbang;
#X obj 147 369 expr 0.01*$f1*$f1;
#X obj 107 294 +~ 1e-20;
#X obj 108 480 *~ 0.00065;
#X obj 87 560 tabreceive~ \$0-hann;
#X obj 373 307 *~;
#X obj 373 282 inlet~;
#X obj 406 308 tabreceive~ \$0-hann;
#X obj 107 321 q8_rsqrt~;
#X obj 372 402 q8_sqrt~;
#X text 458 425 of control;
#X text 456 442 amplitude;
#X text 196 248 reciprocal;
#X text 199 267 modulus of;
#X text 195 287 filter input;
#X text 196 306 amplitude;
#X text 115 159 filter input;
#X text 438 282 control source;
#X text 434 332 Fourier transform;
#X text 28 17 Internal workings of the timbre stamping algorithm. First
the "filter input" is treated as in the compressor patch \, multiplying
each channel amplitude by one over its modulus (but limited by the
"squelch" parameter.) It is then multiplied by the modulus of the channel
amplitude for the control source (which is Fourier analyzed in parallel
with the filter input.);
#X text 145 422 multiply the two amplitude;
#X text 143 439 factors (for compression;
#X text 145 455 and to apply new timbre);
#X obj 148 346 r \$0-squelch;
#X msg 657 76 \; pd dsp 1 \;;
#X obj 576 159 s \$0-window-size;
#X obj 622 125 s \$0-squelch;
#X msg 622 97 10;
#X obj 601 52 t b b b;
#X msg 578 132 256;
#X obj 599 -16 block~ 256 4;
#X connect 0 0 11 1;
#X connect 1 0 11 0;
#X connect 2 0 4 1;
#X connect 3 0 4 0;
#X connect 4 0 28 0;
#X connect 5 0 7 0;
#X connect 6 0 5 0;
#X connect 7 0 13 0;
#X connect 7 0 13 1;
#X connect 7 0 1 0;
#X connect 7 1 9 0;
#X connect 7 1 9 1;
#X connect 7 1 0 0;
#X connect 8 0 12 0;
#X connect 9 0 14 1;
#X connect 10 0 3 0;
#X connect 10 0 3 1;
#X connect 10 1 2 0;
#X connect 10 1 2 1;
#X connect 11 0 8 0;
#X connect 13 0 14 0;
#X connect 14 0 21 0;
#X connect 16 0 22 0;
#X connect 17 0 16 0;
#X connect 18 0 5 1;
#X connect 19 0 47 0;
#X connect 20 0 17 2;
#X connect 21 0 27 0;
#X connect 22 0 0 1;
#X connect 22 0 1 1;
#X connect 23 0 8 1;
#X connect 24 0 10 0;
#X connect 25 0 24 0;
#X connect 26 0 24 1;
#X connect 27 0 17 0;
#X connect 28 0 16 1;
#X connect 42 0 20 0;
#X connect 46 0 45 0;
#X connect 47 0 48 0;
#X connect 47 1 46 0;
#X connect 47 2 43 0;
#X connect 48 0 44 0;
#X restore 86 444 pd fft-analysis;
#X text 27 422 filter;
#X text 29 437 input;
#X text 232 441 source;
#X text 233 422 control;
#X floatatom 454 409 5 0 0 0 - #0-samp-msec -;
#X floatatom 453 432 5 0 0 0 - #0-samp2-msec -;
#N canvas 0 110 565 454 hann-window 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array \$0-hann 256 float 0;
#X coords 0 1 255 0 300 100 1;
#X restore 82 311 graph;
#X obj 378 165 osc~;
#X obj 378 190 *~ -0.5;
#X obj 378 214 +~ 0.5;
#X obj 331 247 tabwrite~ \$0-hann;
#X obj 38 173 /;
#X obj 127 142 samplerate~;
#X obj 177 204 swap;
#X obj 177 228 /;
#X obj 49 201 * 1000;
#X obj 38 115 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X msg 382 130 0;
#X obj 330 131 t f b;
#X obj 37 88 r \$0-window-size;
#X text 15 8 comment;
#X obj 330 105 r \$0-window-hz;
#X obj 177 252 s \$0-window-hz;
#X obj 49 228 s \$0-window-msec;
#X obj 38 251 s 40-window-sec;
#X obj 42 19 inlet;
#X msg 44 50 256;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 4 0;
#X connect 5 0 9 0;
#X connect 5 0 20 0;
#X connect 6 0 5 1;
#X connect 6 0 7 1;
#X connect 7 0 8 0;
#X connect 7 1 8 1;
#X connect 8 0 18 0;
#X connect 9 0 19 0;
#X connect 10 0 5 0;
#X connect 10 0 7 0;
#X connect 10 1 6 0;
#X connect 10 2 11 0;
#X connect 11 0 12 0;
#X connect 13 0 1 1;
#X connect 14 0 1 0;
#X connect 14 1 4 0;
#X connect 14 1 13 0;
#X connect 15 0 10 0;
#X connect 17 0 14 0;
#X connect 21 0 22 0;
#X connect 22 0 10 0;
#X restore 501 389 pd hann-window;
#X text 509 412 sample lengths \,;
#X text 510 427 msec;
#X text 402 498 updated for Pd version 0.39;
#X obj 83 376 inlet~;
#X obj 187 382 inlet~;
#X obj 83 485 outlet~;
#X obj 352 264 inlet;
#X obj 353 381 s \$0-squelch;
#X obj 501 326 inlet;
#X obj 371 289 loadbang;
#X msg 372 318 20;
#X obj 549 326 loadbang;
#X connect 0 0 13 0;
#X connect 11 0 0 0;
#X connect 12 0 0 1;
#X connect 14 0 15 0;
#X connect 16 0 7 0;
#X connect 17 0 18 0;
#X connect 18 0 15 0;
#X connect 19 0 7 0;
